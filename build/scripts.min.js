var app={};!function(a){function b(a,b,d,e,f,g){this.root=a,this.images=[],this.imgLocation="../images/",this.clipWidth=d||170,this.clipHeight=e||150,this.imgMargin=f||4,this.optionsHeight=g||15,c(b,this)}function c(a,b){for(var c=0,d=a.length;d>c;c++){var e=new Image;e.src=b.imgLocation+a[c],e.onload=function(){var a=e,c=document.createElement("div"),d=document.createElement("div"),f=document.createElement("div");return c.className="imgContainer",f.className="imgOptions",d.className="transitionContainer interactive",c.style.width=c.style.maxWidth=d.style.width=b.clipWidth+"px",c.style.height=c.style.maxHeight=d.style.height=b.clipHeight+"px",f.style.height=b.optionsHeight+"px",c.appendChild(d),function(){a.style.margin=b.imgMargin+"px",f.innerHTML="width: "+a.width+"  height: "+a.height,d.appendChild(a),d.appendChild(f),b.root.appendChild(c);var e={container:c,transitionContainer:d,image:a,realWidth:a.width+2*b.imgMargin,realHeight:a.height+2*b.imgMargin+b.optionsHeight};b.images.push(e),c.addEventListener("mouseover",function(){b.increaseImgContainer(e)}),c.addEventListener("mouseout",function(){b.reduceImgContainer(e)})}}()}}b.prototype.increaseImgContainer=function(a){a.container.style.zIndex=1,a.container.style.overflow="visible",a.transitionContainer.style.width=a.realWidth+"px",a.transitionContainer.style.height=a.realHeight+"px"},b.prototype.reduceImgContainer=function(a){a.container.style.zIndex=0,a.container.style.overflow="hidden",a.transitionContainer.style.width=this.clipWidth+"px",a.transitionContainer.style.height=this.clipHeight+"px"},a.ImageManager=b}(app),function(a){function b(a){if(a&&(this.root=document.getElementById(a.getAttribute("data-reference"))),!this.root)throw new Error('Input should have "data-reference" attribute with id of existing HTMLElement!');this.input=a,this.nodes=[],this.ranges=[],this.inputListener=null,this.searchTimeout=200,c(this.root,this.nodes),this.startListenInput()}function c(a,b){if(a.hasChildNodes())for(var d,e=a.childNodes,f=0,g=e.length;g>f;f++)d=e[f],3===d.nodeType?b.push(d):d.hasChildNodes()&&c(d,b);else 3===a.nodeType&&b.push(a)}function d(a){if(3===a.nodeType&&a.data)return a;if(a.hasChildNodes()){a.normalize();for(var b=0,c=a.childNodes.length;c>b;b++){var e=d(a.childNodes[b]);if(e&&e.data)return e}}return null}b.prototype.startListenInput=function(){if(null===this.inputListener){var a,b=this;this.inputListener=function(){var c=b.input.value;clearTimeout(a),a=setTimeout(function(){b.search(c)},b.searchTimeout)},this.input.addEventListener("keyup",this.inputListener)}},b.prototype.stopListenInput=function(){this.input.removeEventListener("keyup",this.inputListener),this.inputListener=null},b.prototype.search=function(a){if(this.clearSelections(),a){var b=/([\.\*\/\^\$\[\]\(\)\{\}\+\?\|\\])/g,c=[],d=a.length,e=new RegExp(a.replace(b,"\\$1"),"g");this.nodes.forEach(function(a,b){for(;a&&null!==(c=e.exec(a.data));){var f=e.lastIndex-d,g=document.createRange(),h=document.createElement("span");h.className="surround",g.setStart(a,f),g.setEnd(a,e.lastIndex),g.surroundContents(h),a=h.nextSibling,e.lastIndex=1,this.ranges.push({item:g,nodeIndex:b})}},this)}},b.prototype.clearSelections=function(){this.ranges.forEach(function(a){var b=a.item,c=b.cloneContents().firstChild.firstChild;b.commonAncestorContainer.normalize(),b.extractContents(),b.insertNode(c),b.commonAncestorContainer.normalize(),this.nodes[a.nodeIndex]=b.commonAncestorContainer.childNodes[b.startOffset]||d(b.commonAncestorContainer),b.detach()},this),this.ranges=[]},a.SearchManager=b}(app),function(){var a=(new app.SearchManager(document.getElementById("search1")),new app.SearchManager(document.getElementById("search2")),["img_1.jpg","img_2.jpg","img_3.jpg","img_4.jpg","img_5.jpg","img_6.jpg","img_7.jpg","img_8.jpg"]);new app.ImageManager(document.getElementById("imagesContainer"),a)}();